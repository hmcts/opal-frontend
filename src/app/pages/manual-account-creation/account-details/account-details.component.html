<div class="govuk-grid-column-two-thirds">
  <app-govuk-heading-with-caption
    captionText="Create account"
    headingText="Account details"
  ></app-govuk-heading-with-caption>
  <app-govuk-summary-list summaryListId="accountDetails">
    <div app-govuk-summary-list-row summaryListId="accountDetails" summaryListRowId="businessUnit">
      <ng-container name>Business unit</ng-container>
      <ng-container value>
        <p class="govuk-body">{{ macStateService.manualAccountCreation.accountDetails.businessUnit }}</p>
      </ng-container>
    </div>
    <div app-govuk-summary-list-row summaryListId="accountDetails" summaryListRowId="defendantType">
      <ng-container name>Defendant type</ng-container>
      <ng-container value>
        <p class="govuk-body">{{ defendantType }}</p>
      </ng-container>
    </div>
  </app-govuk-summary-list>
  <h2 class="govuk-heading-m">Court details</h2>
  <app-govuk-task-list taskListId="courtDetails" taskListClasses="govuk-!-margin-left-0 ">
    <app-govuk-task-list-item
      taskListItemId="courtDetailsItem"
      taskListStatusId="courtDetailsStatus"
      taskListItemClasses="govuk-task-list__item--with-link"
    >
      <ng-container name>
        <a
          class="govuk-link govuk-task-list__link govuk-link--no-visited-state"
          [routerLink]=""
          aria-describedby="courtDetailsStatus"
        >
          Court details
        </a>
      </ng-container>
      <ng-container status>
        <app-govuk-tag
          *ngIf="accountCreationStatus['courtDetails']; else notProvidedTag"
          tagClasses="govuk-tag"
          tagId="courtDetailsStatusTag"
          >Provided</app-govuk-tag
        >

        <ng-template #notProvidedTag>
          <ng-container *ngTemplateOutlet="notProvided; context: { $implicit: 'courtDetailsStatusTag' }"></ng-container>
        </ng-template>
      </ng-container>
    </app-govuk-task-list-item>
  </app-govuk-task-list>

  @if (defendantType === 'Adult or youth with parent or guardian to pay') {
    <h2 class="govuk-heading-m">Parent or guardian details</h2>
    <app-govuk-task-list taskListId="parentOrGuardianDetails" taskListClasses="govuk-!-margin-left-0 ">
      <app-govuk-task-list-item
        taskListItemId="parentOrGuardianDetailsItem"
        taskListStatusId="parentOrGuardianDetailsStatus"
        taskListItemClasses="govuk-task-list__item--with-link"
      >
        <ng-container name>
          <a
            class="govuk-link govuk-task-list__link govuk-link--no-visited-state"
            [routerLink]="manualAccountCreationRoutes.parentOrGuardianDetails"
            aria-describedby="parentOrGuardianDetailsStatus"
          >
            Parent or guardian details
          </a>
        </ng-container>
        <ng-container status>
          <app-govuk-tag
            *ngIf="accountCreationStatus['parentGuardianDetails']; else notProvidedTag"
            tagClasses="govuk-tag"
            tagId="parentOrGuardianDetailsStatusTag"
            >Provided</app-govuk-tag
          >

          <ng-template #notProvidedTag>
            <ng-container
              *ngTemplateOutlet="notProvided; context: { $implicit: 'parentOrGuardianDetailsStatusTag' }"
            ></ng-container>
          </ng-template>
        </ng-container>
      </app-govuk-task-list-item>
      <app-govuk-task-list-item
        taskListItemId="employerDetailsItem"
        taskListStatusId="employerDetailsStatus"
        taskListItemClasses="govuk-task-list__item--with-link border-top__none"
      >
        <ng-container name>
          <a
            class="govuk-link govuk-task-list__link govuk-link--no-visited-state"
            [routerLink]="manualAccountCreationRoutes.employerDetails"
            aria-describedby="employerDetailsStatus"
          >
            Employer details
          </a>
        </ng-container>
        <ng-container status>
          <app-govuk-tag
            *ngIf="accountCreationStatus['employerDetails']; else notProvidedTag"
            tagClasses="govuk-tag"
            tagId="employerDetailsStatusTag"
            >Provided</app-govuk-tag
          >

          <ng-template #notProvidedTag>
            <ng-container
              *ngTemplateOutlet="notProvided; context: { $implicit: 'employerDetailsStatusTag' }"
            ></ng-container>
          </ng-template>
        </ng-container>
      </app-govuk-task-list-item>
    </app-govuk-task-list>
  }
  <h2 class="govuk-heading-m">Defendant details</h2>
  <app-govuk-task-list taskListId="defendantDetails" taskListClasses="govuk-!-margin-left-0 ">
    @if (defendantType === 'Company') {
      <app-govuk-task-list-item
        taskListItemId="companyDetailsItem"
        taskListStatusId="companyDetailsStatus"
        taskListItemClasses="govuk-task-list__item--with-link"
      >
        <ng-container name>
          <a
            class="govuk-link govuk-task-list__link govuk-link--no-visited-state"
            [routerLink]="manualAccountCreationRoutes.companyDetails"
            aria-describedby="companyDetailsStatus"
          >
            Company details
          </a>
        </ng-container>
        <ng-container status>
          <app-govuk-tag
            *ngIf="accountCreationStatus['companyDetails']; else notProvidedTag"
            tagClasses="govuk-tag"
            tagId="companyDetailsStatusTag"
            >Provided</app-govuk-tag
          >

          <ng-template #notProvidedTag>
            <ng-container
              *ngTemplateOutlet="notProvided; context: { $implicit: 'companyDetailsStatusTag' }"
            ></ng-container>
          </ng-template>
        </ng-container>
      </app-govuk-task-list-item>
    } @else {
      <app-govuk-task-list-item
        taskListItemId="personalDetailsItem"
        taskListStatusId="personalDetailsStatus"
        taskListItemClasses="govuk-task-list__item--with-link"
      >
        <ng-container name>
          <a
            class="govuk-link govuk-task-list__link govuk-link--no-visited-state"
            [routerLink]="manualAccountCreationRoutes.personalDetails"
            aria-describedby="personalDetailsStatus"
          >
            Personal details
          </a>
        </ng-container>
        <ng-container status>
          <app-govuk-tag
            *ngIf="accountCreationStatus['personalDetails']; else notProvidedTag"
            tagClasses="govuk-tag"
            tagId="personalDetailsStatusTag"
            >Provided</app-govuk-tag
          >

          <ng-template #notProvidedTag>
            <ng-container
              *ngTemplateOutlet="notProvided; context: { $implicit: 'personalDetailsStatusTag' }"
            ></ng-container>
          </ng-template>
        </ng-container>
      </app-govuk-task-list-item>
    }

    <app-govuk-task-list-item
      taskListItemId="contactDetailsItem"
      taskListStatusId="contactDetailsStatus"
      taskListItemClasses="govuk-task-list__item--with-link border-top__none"
    >
      <ng-container name>
        <a
          class="govuk-link govuk-task-list__link govuk-link--no-visited-state"
          [routerLink]="manualAccountCreationRoutes.contactDetails"
          aria-describedby="contactDetailsStatus"
        >
          Contact details
        </a>
      </ng-container>
      <ng-container status>
        <app-govuk-tag
          *ngIf="accountCreationStatus['contactDetails']; else notProvidedTag"
          tagClasses="govuk-tag"
          tagId="contactDetailsStatusTag"
          >Provided</app-govuk-tag
        >

        <ng-template #notProvidedTag>
          <ng-container
            *ngTemplateOutlet="notProvided; context: { $implicit: 'contactDetailsStatusTag' }"
          ></ng-container>
        </ng-template>
      </ng-container>
    </app-govuk-task-list-item>

    @if (defendantType === 'Adult or youth only') {
      <app-govuk-task-list-item
        taskListItemId="employerDetailsItem"
        taskListStatusId="employerDetailsStatus"
        taskListItemClasses="govuk-task-list__item--with-link border-top__none"
      >
        <ng-container name>
          <a
            class="govuk-link govuk-task-list__link govuk-link--no-visited-state"
            [routerLink]="manualAccountCreationRoutes.employerDetails"
            aria-describedby="employerDetailsStatus"
          >
            Employer details
          </a>
        </ng-container>
        <ng-container status>
          <app-govuk-tag
            *ngIf="accountCreationStatus['employerDetails']; else notProvidedTag"
            tagClasses="govuk-tag"
            tagId="employerDetailsStatusTag"
            >Provided</app-govuk-tag
          >

          <ng-template #notProvidedTag>
            <ng-container
              *ngTemplateOutlet="notProvided; context: { $implicit: 'employerDetailsStatusTag' }"
            ></ng-container>
          </ng-template>
        </ng-container>
      </app-govuk-task-list-item>
    }
  </app-govuk-task-list>
  <h2 class="govuk-heading-m">Offence and imposition details</h2>
  <app-govuk-task-list taskListId="offenceAndImpositionDetails" taskListClasses="govuk-!-margin-left-0 ">
    <app-govuk-task-list-item
      taskListItemId="offenceDetailsItem"
      taskListStatusId="offenceDetailsStatus"
      taskListItemClasses="govuk-task-list__item--with-link"
    >
      <ng-container name>
        <a
          class="govuk-link govuk-task-list__link govuk-link--no-visited-state"
          [routerLink]=""
          aria-describedby="offenceDetailsStatus"
        >
          Offence details
        </a>
      </ng-container>
      <ng-container status>
        <app-govuk-tag
          *ngIf="accountCreationStatus['offenceDetails']; else notProvidedTag"
          tagClasses="govuk-tag"
          tagId="offenceDetailsStatusTag"
          >Provided</app-govuk-tag
        >

        <ng-template #notProvidedTag>
          <ng-container
            *ngTemplateOutlet="notProvided; context: { $implicit: 'offenceDetailsStatusTag' }"
          ></ng-container>
        </ng-template>
      </ng-container>
    </app-govuk-task-list-item>
    <app-govuk-task-list-item
      taskListItemId="paymentTermsItem"
      taskListStatusId="paymentTermsStatus"
      taskListItemClasses="govuk-task-list__item--with-link border-top__none"
    >
      <ng-container name>
        <a
          class="govuk-link govuk-task-list__link govuk-link--no-visited-state"
          [routerLink]=""
          aria-describedby="paymentTermsStatus"
        >
          Payment terms
        </a>
      </ng-container>
      <ng-container status>
        <app-govuk-tag
          *ngIf="accountCreationStatus['paymentTerms']; else notProvidedTag"
          tagClasses="govuk-tag"
          tagId="paymentTermsStatusTag"
          >Provided</app-govuk-tag
        >

        <ng-template #notProvidedTag>
          <ng-container *ngTemplateOutlet="notProvided; context: { $implicit: 'paymentTermsStatusTag' }"></ng-container>
        </ng-template>
      </ng-container>
    </app-govuk-task-list-item>
  </app-govuk-task-list>
  <h2 class="govuk-heading-m">Review and publish</h2>
  <p class="govuk-body">Check that all required fields have been entered before you publish</p>
  <p class="govuk-body">
    <app-govuk-button buttonId="reviewAccountButton"> Review account</app-govuk-button>
  </p>
  <p class="govuk-body">
    <a href="#" class="govuk-link govuk-color__error" (onclick)="handleRoute(routingPaths.dashboard)"
      >Cancel account creation</a
    >
  </p>
</div>

<ng-template #notProvided let-tagId>
  <app-govuk-tag [tagClasses]="'govuk-tag--grey'" [tagId]="tagId">Not provided</app-govuk-tag>
</ng-template>
