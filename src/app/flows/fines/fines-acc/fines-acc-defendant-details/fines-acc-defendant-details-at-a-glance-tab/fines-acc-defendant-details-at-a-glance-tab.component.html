@if (tabData) {
  <div class="govuk-grid-column-full">
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-one-third">
        <h2 [class]="headingStyle">Defendant</h2>
        <hr [class]="headingHrStyle" />

        @if (
          tabData.debtor_detail.document_language === languages.CY ||
          tabData.debtor_detail.hearing_language === languages.CY
        ) {
          <opal-lib-govuk-tag [tagClasses]="'govuk-tag govuk-!-margin-bottom-2'" tagId="enforcement_status">{{
            languages.CY
          }}</opal-lib-govuk-tag>
        }

        <h3 [class]="keyStyle">Name</h3>
        <p [class]="valueStyle">
          {{ tabData.debtor_detail.title }} {{ tabData.debtor_detail.first_names }}
          {{ tabData.debtor_detail.surname | uppercase }}
        </p>

        @if (tabData.debtor_detail.individual_aliases && tabData.debtor_detail.individual_aliases.length > 0) {
          <h3 [class]="keyStyle">Aliases</h3>
          <p [class]="valueStyle">
            @for (alias of tabData.debtor_detail.individual_aliases; track alias.alias_id) {
              {{ alias.forenames }} {{ alias.surname | uppercase }}<br />
            }
          </p>
        }

        <h3 [class]="keyStyle">Date of birth</h3>
        <p [class]="valueStyle">
          {{
            tabData.debtor_detail.date_of_birth
              ? dateService.getFromFormatToFormat(tabData.debtor_detail.date_of_birth, 'dd/MM/yyyy', 'dd MMMM yyyy')
              : '&mdash;'
          }}
        </p>

        <h3 [class]="keyStyle">Address</h3>
        <p [class]="valueStyle">
          {{ tabData.debtor_detail.address_line_1 }}
          @if (tabData.debtor_detail.address_line_2) {
            <br />
            {{ tabData.debtor_detail.address_line_2 }}
          }
          @if (tabData.debtor_detail.address_line_3) {
            <br />
            {{ tabData.debtor_detail.address_line_3 }}
          }
          @if (tabData.debtor_detail.address_line_4) {
            <br />
            {{ tabData.debtor_detail.address_line_4 }}
          }
          @if (tabData.debtor_detail.address_line_5) {
            <br />
            {{ tabData.debtor_detail.address_line_5 }}
          }
          <br />
          {{ tabData.debtor_detail.post_code | uppercase }}
        </p>

        <h3 [class]="keyStyle">National Insurance Number</h3>
        <p [class]="valueStyle">
          {{
            tabData.debtor_detail.national_insurance_number
              ? (tabData.debtor_detail.national_insurance_number | uppercase)
              : '&mdash;'
          }}
        </p>

        @if (
          tabData.debtor_detail.document_language === languages.CY ||
          tabData.debtor_detail.hearing_language === languages.CY
        ) {
          <h2 [class]="headingStyle">Language preferences</h2>
          <hr [class]="headingHrStyle" />
          <h3 [class]="keyStyle">Document language</h3>
          <p [class]="valueStyle">{{ tabData.debtor_detail.document_language }}</p>
          <h3 [class]="keyStyle">Court hearing language</h3>
          <p [class]="valueStyle">{{ tabData.debtor_detail.hearing_language }}</p>
        }
      </div>

      <div class="govuk-grid-column-one-third">
        <h2 [class]="headingStyle">Payment terms</h2>
        <hr [class]="headingHrStyle" />

        @if (tabData.payment_terms.payment_terms_type_code === 'By date') {
          <h3 [class]="keyStyle">Payment terms</h3>
          <p [class]="valueStyle">Pay by date</p>
          @if (tabData.payment_terms.effective_date) {
            <h3 [class]="keyStyle">By date</h3>
            <p [class]="valueStyle">
              {{
                dateService.getFromFormatToFormat(tabData.payment_terms.effective_date, 'dd/MM/yyyy', 'dd MMMM yyyy')
              }}
            </p>
          }
        } @else if (tabData.payment_terms.payment_terms_type_code === 'Instalments') {
          <h3 [class]="keyStyle">Payment terms</h3>
          @if (tabData.payment_terms.lump_sum_amount) {
            <p [class]="valueStyle">Lump sum plus instalments</p>
          } @else {
            <p [class]="valueStyle">Instalments only</p>
          }

          <h3 [class]="keyStyle">Frequency</h3>
          <p [class]="valueStyle">{{ tabData.payment_terms.instalment_period }}</p>
          @if (tabData.payment_terms.instalment_amount) {
            <h3 [class]="keyStyle">Instalments</h3>
            <p [class]="valueStyle">
              {{ utilsService.convertToMonetaryString(tabData.payment_terms.instalment_amount) }}
            </p>
          }
          @if (tabData.payment_terms.effective_date) {
            <h3 [class]="keyStyle">Start date</h3>
            <p [class]="valueStyle">
              {{
                dateService.getFromFormatToFormat(tabData.payment_terms.effective_date, 'dd/MM/yyyy', 'dd MMMM yyyy')
              }}
            </p>
          }
        }
      </div>

      <div class="govuk-grid-column-one-third">
        <h2 [class]="headingStyle">Enforcement status</h2>
        <hr [class]="headingHrStyle" />
        <opal-lib-govuk-tag
          [tagClasses]="'govuk-tag govuk-blue-background-colour govuk-white-text-colour govuk-!-margin-bottom-2'"
          tagId="enforcement_status"
          >{{ tabData.enforcement_status.last_enforcement_action_title }} ({{
            tabData.enforcement_status.last_enforcement_action
          }})</opal-lib-govuk-tag
        >
        @if (tabData.enforcement_status.collection_order_made) {
          @if (!isYouth) {
            <opal-lib-moj-badge badgeId="badge1" badgeClasses="moj-badge--blue govuk-!-margin-bottom-2"
              >Collection Order</opal-lib-moj-badge
            >
          } @else {
            <opal-lib-moj-badge badgeId="badge1" badgeClasses="moj-badge--red govuk-!-margin-bottom-2"
              >No collection Order</opal-lib-moj-badge
            >
          }
        } @else if (!isYouth) {
          <opal-lib-moj-badge badgeId="badge1" badgeClasses="moj-badge--red govuk-!-margin-bottom-2"
            >No collection Order</opal-lib-moj-badge
          >
        }
        @if (tabData.enforcement_status.default_days_in_jail) {
          <h3 [class]="keyStyle">Days in default</h3>
          <p [class]="valueStyle">
            {{ tabData.enforcement_status.default_days_in_jail }}
            {{ tabData.enforcement_status.default_days_in_jail > 1 ? 'days' : 'day' }}
          </p>
        }
        @if (tabData.enforcement_status.enforcement_override_id) {
          <h3 [class]="keyStyle">Enforcement override</h3>
          <p [class]="valueStyle">
            {{ tabData.enforcement_status.enforcement_override_title }}
            {{ tabData.enforcement_status.enforcement_override_id }}
          </p>
        }
        <hr />
        @if (tabData.enforcement_status.last_movement_date) {
          <h3 [class]="keyStyle">Date of last movement</h3>
          <p [class]="valueStyle">
            {{
              dateService.getFromFormatToFormat(
                tabData.enforcement_status.last_movement_date,
                'dd/MM/yyyy',
                'dd MMMM yyyy'
              )
            }}
          </p>
        }

        <h2 [class]="headingStyle">Comments</h2>
        <hr [class]="headingHrStyle" />
        @if (
          tabData.account_notes.account_comment ||
          tabData.account_notes.free_text_note_1 ||
          tabData.account_notes.free_text_note_2 ||
          tabData.account_notes.free_text_note_3
        ) {
          <h3 [class]="keyStyle">Comment</h3>
          <p [class]="valueStyle">{{ tabData.account_notes.account_comment ?? '-' }}</p>
          <h3 [class]="keyStyle">Free text notes</h3>
          @if (
            tabData.account_notes.free_text_note_1 ||
            tabData.account_notes.free_text_note_2 ||
            tabData.account_notes.free_text_note_3
          ) {
            <p [class]="valueStyle">
              @if (tabData.account_notes.free_text_note_1) {
                {{ tabData.account_notes.free_text_note_1 }}
                <br />
              }
              @if (tabData.account_notes.free_text_note_2) {
                {{ tabData.account_notes.free_text_note_2 }}
                <br />
              }
              @if (tabData.account_notes.free_text_note_3) {
                {{ tabData.account_notes.free_text_note_3 }}
              }
            </p>
          } @else {
            <p [class]="valueStyle">&mdash;</p>
          }
          @if (hasAccountMaintenencePermission) {
            <p [class]="valueStyle">
              <a
                class="govuk-link govuk-link--no-visited-state"
                href="#"
                (click)="addComments.emit($event)"
                (keyup.enter)="addComments.emit($event)"
                >Change</a
              >
            </p>
          }
        } @else if (hasAccountMaintenencePermission) {
          <p [class]="valueStyle">
            <a
              class="govuk-link govuk-link--no-visited-state"
              href="#"
              (click)="addComments.emit($event)"
              (keyup.enter)="addComments.emit($event)"
              >Add comments</a
            >
          </p>
        }
      </div>
    </div>
  </div>
}
