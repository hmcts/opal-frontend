@if (tabData?.defendant_account_party; as party) {
  <div class="govuk-grid-column-two-thirds">
    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        <h2 [class]="style.heading">Parent or guardian details</h2>
      </div>
      @if (hasAccountMaintenencePermission) {
        <div class="govuk-grid-column-one-third govuk-!-text-align-right govuk-!-margin-top-3">
          <a
            tabindex="0"
            [class]="style.changeLink"
            (click)="handleChangeParentOrGuardianDetails()"
            (keyup.enter)="handleChangeParentOrGuardianDetails()"
            >Change</a
          >
        </div>
      }
    </div>
    <hr [class]="style.hr" />

    @if (!party.party_details.organisation_flag && party.party_details.individual_details; as individualDetails) {
      <opal-lib-govuk-summary-card-list
        cardTitle="Parent or guardian details"
        summaryCardListId="parent-or-guardian-details"
      >
        <ng-container content>
          <opal-lib-govuk-summary-list summaryListId="parentOrGuardianDetails">
            <div
              opal-lib-govuk-summary-list-row
              class="govuk-summary-list__row govuk-summary-list__row--no-actions"
              summaryListId="parentOrGuardianDetails"
              summaryListRowId="name"
            >
              <ng-container name>Name</ng-container>
              <ng-container value
                >{{ individualDetails.title }} {{ individualDetails.forenames }}
                {{ individualDetails.surname | uppercase }}</ng-container
              >
            </div>
            <div
              opal-lib-govuk-summary-list-row
              class="govuk-summary-list__row govuk-summary-list__row--no-actions"
              summaryListId="parentOrGuardianDetails"
              summaryListRowId="aliases"
            >
              <ng-container name>Aliases</ng-container>
              @if (individualDetails.individual_aliases?.length ?? 0 > 0) {
                <ng-container value>
                  @for (alias of individualDetails.individual_aliases; track alias.alias_id) {
                    {{ alias.forenames }} {{ alias.surname | uppercase }}<br />
                  }
                </ng-container>
              } @else {
                <ng-container value><app-fines-not-provided></app-fines-not-provided></ng-container>
              }
            </div>
            <div
              opal-lib-govuk-summary-list-row
              class="govuk-summary-list__row govuk-summary-list__row--no-actions"
              summaryListId="parentOrGuardianDetails"
              summaryListRowId="dob"
            >
              <ng-container name>Date of birth</ng-container>
              @if (individualDetails.date_of_birth; as dob) {
                <ng-container value>{{
                  dateService.getFromFormatToFormat(dob!, 'dd/MM/yyyy', 'dd MMMM yyyy')
                }}</ng-container>
              } @else {
                <ng-container value><app-fines-not-provided></app-fines-not-provided></ng-container>
              }
            </div>
            <div
              opal-lib-govuk-summary-list-row
              class="govuk-summary-list__row govuk-summary-list__row--no-actions"
              summaryListId="parentOrGuardianDetails"
              summaryListRowId="national_insurance_number"
            >
              <ng-container name>National Insurance number</ng-container>
              @if (individualDetails.national_insurance_number; as nationalInsuranceNumber) {
                <ng-container value>{{ nationalInsuranceNumber | uppercase }}</ng-container>
              } @else {
                <ng-container value><app-fines-not-provided></app-fines-not-provided></ng-container>
              }
            </div>
            <div
              opal-lib-govuk-summary-list-row
              class="govuk-summary-list__row govuk-summary-list__row--no-actions"
              summaryListId="parentOrGuardianDetails"
              summaryListRowId="address"
            >
              <ng-container name>Address</ng-container>
              @if (party.address; as address) {
                <ng-container value>
                  <app-fines-acc-address [address]="address"></app-fines-acc-address>
                </ng-container>
              } @else {
                <ng-container value><app-fines-not-provided></app-fines-not-provided></ng-container>
              }
            </div>

            @if (party?.vehicle_details; as vehicle) {
              <div
                opal-lib-govuk-summary-list-row
                class="govuk-summary-list__row govuk-summary-list__row--no-actions"
                summaryListId="parentOrGuardianDetails"
                summaryListRowId="vehicle_make_and_model"
              >
                <ng-container name>Vehicle make and model</ng-container>
                <ng-container value>
                  @if (vehicle.vehicle_make_and_model) {
                    {{ vehicle.vehicle_make_and_model }}
                  } @else {
                    <app-fines-not-provided></app-fines-not-provided>
                  }
                </ng-container>
              </div>
              <div
                opal-lib-govuk-summary-list-row
                class="govuk-summary-list__row govuk-summary-list__row--no-actions"
                summaryListId="parentOrGuardianDetails"
                summaryListRowId="vehicle_registration"
              >
                <ng-container name>Vehicle registration</ng-container>
                <ng-container value>
                  @if (vehicle.vehicle_registration) {
                    {{ vehicle.vehicle_registration | uppercase }}
                  } @else {
                    <app-fines-not-provided></app-fines-not-provided>
                  }
                </ng-container>
              </div>
            }
          </opal-lib-govuk-summary-list>
        </ng-container>
      </opal-lib-govuk-summary-card-list>
    }

    @if (
      party.party_details.organisation_flag && party.is_debtor && party.party_details.organisation_details;
      as organisationDetails
    ) {
      <ng-container content>
        <opal-lib-govuk-summary-card-list cardTitle="Company details" summaryCardListId="company">
          <ng-container content>
            <opal-lib-govuk-summary-list summaryListId="companyDetails">
              <div
                opal-lib-govuk-summary-list-row
                class="govuk-summary-list__row govuk-summary-list__row--no-actions"
                summaryListId="companyDetails"
                summaryListRowId="name"
              >
                <ng-container name>Name</ng-container>
                <ng-container value>{{ organisationDetails.organisation_name }}</ng-container>
              </div>
              <div
                opal-lib-govuk-summary-list-row
                class="govuk-summary-list__row govuk-summary-list__row--no-actions"
                summaryListId="companyDetails"
                summaryListRowId="aliases"
              >
                <ng-container name>Aliases</ng-container>
                @if (organisationDetails.organisation_aliases?.length ?? 0 > 0) {
                  <ng-container value>
                    @for (alias of organisationDetails.organisation_aliases; track alias.alias_id) {
                      {{ alias.organisation_name }} <br />
                    }
                  </ng-container>
                } @else {
                  <ng-container value><app-fines-not-provided></app-fines-not-provided></ng-container>
                }
              </div>
              <div
                opal-lib-govuk-summary-list-row
                class="govuk-summary-list__row govuk-summary-list__row--no-actions"
                summaryListId="companyDetails"
                summaryListRowId="address"
              >
                <ng-container name>Address</ng-container>
                @if (party.address; as address) {
                  <ng-container value>
                    <app-fines-acc-address [address]="address"></app-fines-acc-address>
                  </ng-container>
                } @else {
                  <ng-container value><app-fines-not-provided></app-fines-not-provided></ng-container>
                }
              </div>
              @if (party?.vehicle_details; as vehicle) {
                <div
                  opal-lib-govuk-summary-list-row
                  class="govuk-summary-list__row govuk-summary-list__row--no-actions"
                  summaryListId="companyDetails"
                  summaryListRowId="vehicle_make_and_model"
                >
                  <ng-container name>Vehicle make and model</ng-container>
                  <ng-container value>
                    @if (vehicle.vehicle_make_and_model) {
                      {{ vehicle.vehicle_make_and_model }}
                    } @else {
                      <app-fines-not-provided></app-fines-not-provided>
                    }
                  </ng-container>
                </div>
                <div
                  opal-lib-govuk-summary-list-row
                  class="govuk-summary-list__row govuk-summary-list__row--no-actions"
                  summaryListId="companyDetails"
                  summaryListRowId="vehicle_registration"
                >
                  <ng-container name>Vehicle registration</ng-container>
                  <ng-container value>
                    @if (vehicle.vehicle_registration) {
                      {{ vehicle.vehicle_registration | uppercase }}
                    } @else {
                      <app-fines-not-provided></app-fines-not-provided>
                    }
                  </ng-container>
                </div>
              }
            </opal-lib-govuk-summary-list>
          </ng-container>
        </opal-lib-govuk-summary-card-list>
      </ng-container>
    }

    @if (party.is_debtor && party.contact_details; as contact_details) {
      <opal-lib-govuk-summary-card-list cardTitle="Contact details" summaryCardListId="contact">
        <ng-container content>
          <opal-lib-govuk-summary-list summaryListId="contactDetails">
            <div
              opal-lib-govuk-summary-list-row
              class="govuk-summary-list__row govuk-summary-list__row--no-actions"
              summaryListId="contactDetails"
              summaryListRowId="primary_email_address"
            >
              <ng-container name>Primary email address</ng-container>
              @if (contact_details.primary_email_address) {
                <ng-container value>{{ contact_details.primary_email_address }}</ng-container>
              } @else {
                <ng-container value><app-fines-not-provided></app-fines-not-provided></ng-container>
              }
            </div>
            <div
              opal-lib-govuk-summary-list-row
              class="govuk-summary-list__row govuk-summary-list__row--no-actions"
              summaryListId="contactDetails"
              summaryListRowId="secondary_email_address"
            >
              <ng-container name>Secondary email address</ng-container>
              @if (contact_details.secondary_email_address) {
                <ng-container value>{{ contact_details.secondary_email_address }}</ng-container>
              } @else {
                <ng-container value><app-fines-not-provided></app-fines-not-provided></ng-container>
              }
            </div>
            <div
              opal-lib-govuk-summary-list-row
              class="govuk-summary-list__row govuk-summary-list__row--no-actions"
              summaryListId="contactDetails"
              summaryListRowId="mobile_telephone_number"
            >
              <ng-container name>Mobile telephone number</ng-container>
              @if (contact_details.mobile_telephone_number) {
                <ng-container value>{{ contact_details.mobile_telephone_number }}</ng-container>
              } @else {
                <ng-container value><app-fines-not-provided></app-fines-not-provided></ng-container>
              }
            </div>
            <div
              opal-lib-govuk-summary-list-row
              class="govuk-summary-list__row govuk-summary-list__row--no-actions"
              summaryListId="contactDetails"
              summaryListRowId="home_telephone_number"
            >
              <ng-container name>Home telephone number</ng-container>
              @if (contact_details.home_telephone_number) {
                <ng-container value>{{ contact_details.home_telephone_number }}</ng-container>
              } @else {
                <ng-container value><app-fines-not-provided></app-fines-not-provided></ng-container>
              }
            </div>
            <div
              opal-lib-govuk-summary-list-row
              class="govuk-summary-list__row govuk-summary-list__row--no-actions"
              summaryListId="contactDetails"
              summaryListRowId="work_telephone_number"
            >
              <ng-container name>Work telephone number</ng-container>
              @if (contact_details.work_telephone_number) {
                <ng-container value>{{ contact_details.work_telephone_number }}</ng-container>
              } @else {
                <ng-container value><app-fines-not-provided></app-fines-not-provided></ng-container>
              }
            </div>
          </opal-lib-govuk-summary-list>
        </ng-container>
      </opal-lib-govuk-summary-card-list>
    }

    @if (
      party.is_debtor &&
      (party.language_preferences?.document_language_preference?.language_display_name === languages.CY ||
        party.language_preferences?.hearing_language_preference?.language_display_name === languages.CY)
    ) {
      <opal-lib-govuk-summary-card-list cardTitle="Language preferences" summaryCardListId="language">
        <ng-container content>
          <opal-lib-govuk-summary-list summaryListId="languagePreferences">
            <div
              opal-lib-govuk-summary-list-row
              class="govuk-summary-list__row govuk-summary-list__row--no-actions"
              summaryListId="languagePreferences"
              summaryListRowId="document_language"
            >
              <ng-container name>Document language</ng-container>
              @if (party.language_preferences?.document_language_preference?.language_display_name) {
                <ng-container value>{{
                  party.language_preferences?.document_language_preference?.language_display_name
                }}</ng-container>
              } @else {
                <ng-container value><app-fines-not-provided></app-fines-not-provided></ng-container>
              }
            </div>
            <div
              opal-lib-govuk-summary-list-row
              class="govuk-summary-list__row govuk-summary-list__row--no-actions"
              summaryListId="languagePreferences"
              summaryListRowId="hearing_language"
            >
              <ng-container name>Court hearing language</ng-container>
              @if (party.language_preferences?.hearing_language_preference?.language_display_name) {
                <ng-container value>{{
                  party.language_preferences?.hearing_language_preference?.language_display_name
                }}</ng-container>
              } @else {
                <ng-container value><app-fines-not-provided></app-fines-not-provided></ng-container>
              }
            </div>
          </opal-lib-govuk-summary-list>
        </ng-container>
      </opal-lib-govuk-summary-card-list>
    }

    @if (!party.party_details.organisation_flag && party.is_debtor && party.employer_details; as employer_details) {
      <opal-lib-govuk-summary-card-list cardTitle="Employer details" summaryCardListId="employer">
        <ng-container content>
          <opal-lib-govuk-summary-list summaryListId="employerDetails">
            <div
              opal-lib-govuk-summary-list-row
              class="govuk-summary-list__row govuk-summary-list__row--no-actions"
              summaryListId="employerDetails"
              summaryListRowId="employer_name"
            >
              <ng-container name>Employer name</ng-container>
              @if (employer_details.employer_name) {
                <ng-container value>{{ employer_details.employer_name }}</ng-container>
              } @else {
                <ng-container value><app-fines-not-provided></app-fines-not-provided></ng-container>
              }
            </div>
            <div
              opal-lib-govuk-summary-list-row
              class="govuk-summary-list__row govuk-summary-list__row--no-actions"
              summaryListId="employerDetails"
              summaryListRowId="employer_reference"
            >
              <ng-container name>Employer reference</ng-container>
              @if (employer_details.employer_reference) {
                <ng-container value>{{ employer_details.employer_reference }}</ng-container>
              } @else {
                <ng-container value><app-fines-not-provided></app-fines-not-provided></ng-container>
              }
            </div>
            <div
              opal-lib-govuk-summary-list-row
              class="govuk-summary-list__row govuk-summary-list__row--no-actions"
              summaryListId="employerDetails"
              summaryListRowId="employer_email_address"
            >
              <ng-container name>Employer email</ng-container>
              @if (employer_details.employer_email_address) {
                <ng-container value>{{ employer_details.employer_email_address }}</ng-container>
              } @else {
                <ng-container value><app-fines-not-provided></app-fines-not-provided></ng-container>
              }
            </div>
            <div
              opal-lib-govuk-summary-list-row
              class="govuk-summary-list__row govuk-summary-list__row--no-actions"
              summaryListId="employerDetails"
              summaryListRowId="employer_telephone_number"
            >
              <ng-container name>Employer telephone</ng-container>
              @if (employer_details.employer_telephone_number) {
                <ng-container value>{{ employer_details.employer_telephone_number }}</ng-container>
              } @else {
                <ng-container value><app-fines-not-provided></app-fines-not-provided></ng-container>
              }
            </div>
            <div
              opal-lib-govuk-summary-list-row
              class="govuk-summary-list__row govuk-summary-list__row--no-actions"
              summaryListId="employerDetails"
              summaryListRowId="employer_address"
            >
              <ng-container name>Employer address</ng-container>
              @if (employer_details.employer_address; as address) {
                <ng-container value>
                  <app-fines-acc-address [address]="address"></app-fines-acc-address>
                </ng-container>
              } @else {
                <ng-container value><app-fines-not-provided></app-fines-not-provided></ng-container>
              }
            </div>
          </opal-lib-govuk-summary-list>
        </ng-container>
      </opal-lib-govuk-summary-card-list>
    }
  </div>
  @if (tabData?.defendant_account_party?.is_debtor) {
    <div class="govuk-grid-column-one-third">
      <hr [class]="style.hr" />
      <h2 [class]="style.heading">Actions</h2>
      <p>
        <a
          tabindex="0"
          (click)="handleRemoveParentOrGuardianDetails()"
          (keyup.enter)="handleRemoveParentOrGuardianDetails()"
          >Remove Parent or guardian details</a
        >
      </p>
    </div>
  }
}
